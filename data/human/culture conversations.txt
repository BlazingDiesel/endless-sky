# Copyright (c) 2021 by Michael Zahniser
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.

mission "Sad Gamblers - Republic"
	minor
	source
		government "Republic"
		attributes "near earth"
		not attributes "station"
	to offer
		random < 1
	on offer
		conversation
			`Passing through the spaceport you see a sizable group of people waiting on a lottery draw. You hear a whoop of success, and your attention is drawn as one of them wins a moderate sum in a 12th division win. It's one or two day's worth of standard pay.`
			`	It's difficult not to pity them as they immediately buy more tickets with the whole value.`
				decline

mission "Sad Gamblers - Syndicate"
	minor
	source
		government "Syndicate"
		not attributes "station"
	to offer
		random < 1
	on offer
		conversation
			`Passing through the spaceport you see a sizable group of people waiting on a lottery draw. You hear a whoop of success, and your attention is drawn as one of them wins a moderate sum in a 12th division win. It's one or two day's worth of standard pay.`
			`	It's difficult not to pity them as they immediately buy more tickets with the whole value.`
				decline



mission "Gift Store Interaction"
	minor
	source
		government "Republic"
		attributes "deep"
		not attributes "station"
	to offer
		random < 1
	on offer
		conversation
			`As you wander the spaceport with a snack, waiting for your ship to be refueled, you pass a local souvenir shop and poke your head in to kill a little time. You see a decent looking mug with the text "<origin>" printed underneath an attractive, stylized representation of the spaceport you are presently standing in and pick it up to see how it feels. The handle is solid, not too small for your fingers, and the lip of it looks like it would be comfortable to drink out of.`
			`	Two young adults wander into the aisle just a couple of meters away, conversing in a language that you don't understand, one that is perhaps local to the Deep. They're cooing over an item they've found, but when one flips it over to look at the price tag, there is an immediate exchange of looks and expressions that does not require translation. The item ends up back on the shelf with a giggle and a head-shake.`
			branch broke
				credits < 50
			`	Curious, you turn over your own mug and see that it is indeed at least five times what you would expect to pay for a mug, even a good one: 50 credits. Still, it is certainly a novelty...`
			choice
				`	(Buy the mug.)`
					goto buy
				`	(Put it back.)`
			`	You roll your eyes and put it back. Some experiences really are universal.`
				decline
			
			label buy
			action
				payment -50
				outfit "Mug"
			`	You purchase the mug on an impulse. At least you can ditch your other one with a chip in it.`
				decline
			
			label broke
			`	Curious, you turn over your own mug, and when you spot the 50 credit price tag your heart sinks. You could never afford such an expensive mug. You put it back and walk away while pondering your financial situation.`
				decline

outfit "Mug"
	category "Hand to Hand"
	cost 50
	thumbnail "outfit/unknown"
	"capture attack" .1
	"unplunderable" 1
	description "You can throw it in a pinch, you guess."



mission "Trash Fire Crops"
	minor
	source
		government "Republic"
		attributes "dirt belt"
		not attributes "station"
	to offer
		random < 1
	on offer
		conversation
			`As you move about the spaceport, you can't avoid the terrible smell. It's like a trash fire, but you can't see any sort of smoke.`
			choice
				`	(Ignore it.)`
					goto ignore
				`	(Ask around.)`
			`	You ask one of the locals who doesn't look too busy. They sadly inform you that there's been a bumper banana crop, but unfortunately other wealthier worlds had a bumper crop at the same time, and there's nowhere to either sell or store a significant excess. Distressed farmers are burning the excess fruit to make fertilizer for the next season, the wind has carried the smell all over town.`
				decline
			label ignore
			`	You leave the mysterious smell to the locals and continue on your business.`
				decline



mission "Paradise Cleaner Incident"
	minor
	source
		government "Republic"
		attributes "paradise"
		not attributes "station"
	to offer
		random < 1
	on offer
		conversation
			`Visiting the Paradise spaceports is always an interesting experience for someone from abroad. Nowhere else is class such an ingrained component of daily life. You find yourself noticing people who seem to be invisible to most of those going about their business, but they never catch your eye. They always appear to be doing their utmost to avoid notice.`
			`	You haven't noticed children that look poor here in the past, but on this occasion you spot one as he knocks over a mop and bucket... right in front of a businessman and his family rolling their bags through the spaceport. You've never seen someone go so deathly pale as the cleaner, the boy's mother, who scurries to fix things before the man even draws a breath.`
			`	A pair of security officers appear almost immediately, before you could intercede one way or the other, as the man and his family begin to complain. One officer provides assurances as the other supervises the cleaner, who quickly hurries her child out of harm's way.`
				decline



mission "Tarazed Ship Christening"
	minor
	source "Wayfarer"
	to offer
		random < 1
		has "main plot completed"
	on offer
		conversation
			`As you walk past a number of ships and crew going about their work in the spaceport, a small gathering in front of a Shuttle catches your attention. A young woman wearing a rather cheesy pilot uniform is in the midst of a little group of people all celebrating together. As you pass by them, a man standing on the top of a ladder breaks a bottle of Champagne on the (clearly not new) ship's hull. A loud cheer erupts from the group, earning an embarrassed blush from the young woman.`
			choice
				`	(Take a closer look.)`
					goto investigate
				`	(Shout well wishes as I pass by.)`
					goto passby
				`	(Ignore them, I have more important things to do.)`
			`	You hurry past the rowdy group, annoyed by the disturbance.`
				decline
			label passby
			`	You hurry past the group as they quiet down. Taking advantage of the momentary lull, you shout "Good luck! You've got this!" toward them. They let out another cheer in response, with the exception of the young woman who buries her face in her hands.`
				decline
			label investigate
			`	You approach the group as they quiet down, noticing a hint of anxiety in the air.`
			`	"Nothing quite like buying your very first starship," you say over their chatter. The celebration goes quiet as they turn to see who interrupted their little party.`
			`	"It's certainly been an... experience," the young woman replies once you are in comfortable talking distance.`
			choice
				`	"Have you got any big plans with it?"`
					goto plans
				`	(Give some advice.)`
					goto advice
				`	"So, who's the lucky pilot?"`
			`	You gesture to the Shuttle and look around as if it should be anyone else.`
			`	"Uhh... that would be me," the woman says, glancing around awkwardly.`
			choice
				`	(Try to salvage the awkward situation.)`
				`	(Get out while you can.)`
					goto getout
			`	"I'm just messing with you, my psychiatrist doesn't think it's very funny when I do it to him either."`
			`	"Oh," the woman says quietly, "that's... nice, I guess."`
			label getout
			`	You realize that you have made this random young lady quite uncomfortable by barging in with your input.`
			`	"Well, good luck!" you say with a wave as you hurry away. You barely hear the quiet "thank you" over the burning in your ears.`
				decline
			label plans
			`	"Right now," she says with a sigh, "the only plan I have is to get rid of the massive debt that I'm in because of it."`
			label advice
			`	"The mortgage isn't so bad as long as you're willing to work hard," you say with a smile, "and there is no shortage of people in need of a ship and a good pilot."`
			`	"I knew you could make a decent living with one, but is it really that easy?" she asks.`
			`	"The work isn't easy, but finding a job is the least of your worries. I'm sure that you'll have this ship paid off in no time."`
			`	You stay around and talk with the aspiring pilot for a few minutes, giving her tips and advice before stating that you have work to do. As you turn to leave, an older man places his hand on your arm, stopping you.`
			`	"Before you go," the man says, "we weren't very sure about this whole 'pilot' thing at first, but it's good to hear that my little girl has made the right decision. Thank you for that."`
			`	"It's the least I could do," you say before walking away.`
				decline



mission "Influencer Encounter"
	minor
	source
		government "Republic"
		attributes "paradise"
		not attributes "station"
	to offer
		random < 1
		"net worth" >= 7500000
	on offer
		conversation
			`After taking care of all of your necessary duties at the spaceport, you meander your way back towards your ship. As you're approaching, though, you spot a peculiar group of people standing next, walking around, and leaning on it. They don't appear to be in any uniforms, organized in any particular way, or acting aggressively, but instinctively you hesitate to come any closer.`
			`	Positioning yourself to get a better look at them without being seen, you notice one individual holding a video recording device of some kind, with the others seemingly flaunting around in front of it. It doesn't take long for you to come to realize that these fairly young-looking people are in the process of recording some video for social media, and are utilizing your ship as bragging material.`
			choice
				`	(Approach them.)`
					goto approach
				`	(Just wait for them to leave.)`
					goto wait
				`	(Get on your ship and leave without speaking.)`
			`	You lower the ramp to your ship, startling the group briefly. Silently, you walk past them and enter, receiving confused looks on the way. Before any of them have time to say something, the ship's hatch closes.`
				decline
			label wait
			`	Waiting for a few minutes, you watch as the group continues walking, posing, and occasionally briefly dancing around your ship. Periodically they break into conversations that are either too faint to hear or end in a noticeably annoyed tone directed to the individual holding the recording device. It's almost comedic watching them and knowing the full context about the scene.`
			`	At present moment though, they show no signs of wrapping up what they're doing.`
			choice
				`	(Now approach them.)`
					goto approach
				`	(Keep waiting for them to leave.)`
			`	After what feels like countless seconds of your short mortal life withered away into nothingness but what was probably closer to just 10 minutes, the group apparently collectively decides they are done using your ship as a prop. Relieved, you return to it and try not to focus too hard on the fingerprints they left on the hull.`
				decline
			label approach
			`	You walk up to the group though none of them seem to notice you approaching. When you get to them, however, one man either in his late teens or early twenties makes eye contact, stands up a bit straighter, and let's out a slightly awkward "Uhh..." The rest of the group now start to turn to look at you.`
			choice
				`	"Do you all plan on paying for the scratches you're making?"`
					goto scratches
				`	"Whoah! Is this really your ship?"`
					goto pretend
				`	(Pretend to be spaceport security.)`
					goto security
				`	(Don't say anything and just stare.)`
			`	You and the group stand in silence for a moment before one of them, a young woman, says "Is something happening?"`
			choice
				`	(Say literally anything.)`
					goto babbling
				`	(Just stay quiet and keep staring.)`
			`	At this point, the one who was holding the recording device says "Listen, dude, we're doing something here..." gesturing with what he's holding.`
			`	Not daring to pierce the now-deafening awkward silence you've chosen to create, you continue looking over the group. They keep making attempts to grab ahold of your attention, tell you to leave, and question who you are, but you didn't wake up today in the mood to be moving your vocal cords for any reason.`
				goto giveup
			label babbling
			`	You go to speak something to these individuals, however given the silence that has built up, the awkward tension that has built in your brain snaps completely leading to you forming sounds that are so nonsensical they are probably only intelligible to the Quarg. In response, the people before you grow baffled facial expressions and just stand there hopelessly.`
				goto giveup
			label scratches
			`	"Wuh, scratches?" says one young woman, who seems now more than eager to stop leaning against the ship.`
			`	"Yes! The <ship> is a fine thing, don't you know? It cost me far too much just to have some random people dancing and bumping into it."`
			`	"It's not like we were hurting it or nothing. We didn't scratch your precious hunk of metal."`
			`	"Well I guess we'll have to see about that," you add. Looking over the hull where they were leaning and posing against it, you don't see any noticeable scratches or dents. It would actually be surprising if you did, considering it goes through much rougher activity just flying it through space.`
			`	"Oh trust me, we're not paying anything. My father- I mean, I have better lawyers than you ever will, and the ship is fine anyway!"`
			`	"Whatever, just leave it alone, okay?"`
			`	She sighs before replying "Fine, then. I guess we'll just record... somewhere else." They begin collecting their things to go.`
				goto giveup
			label pretend
			`	"Yuh-huh," says one young woman, still holding some of her weight with here hand against the ship.`
			`	"Incredible!" your reply, "You named it the <ship>, huh? What a silly name."`
			`	"Who asked you? It's my ship, I'll name it the uhh, <ship> if I want to! Do you even know who I am."`
			`	"No clue, I was just admiring the ship. Must have cost you quite a bit," you say, hopefully convincingly.`
			`	"Yeah, it did. And if you know who I was, and who we are, you'd know that." She turns to another one in her group and says, "I swear old people will never get a good grasp of social media." The group giggles briefly.`
			choice
				`	"Would you mind giving me a tour of the inside of it?"`
					goto tour
				`	"Oh, well could I be in whatever you're recording?"`
			`	The woman nearly laughs before saying "What? No! We're doing something important here."`
			`	"Well I just thought," you add, "since you're using my ship as a prop that I had more of a say on the matter."`
			`	"Your ship..." she replies, looking back and forth between you and it. It's not long before the group understands the situation wholly and drop their ruse to make you leave them alone. Awkwardly she says, "I guess we'll just record... somewhere else, then." They begin collecting their things to go.`
				goto giveup
			label tour
			`	The woman nearly laughs before saying "A tour? No! We're doing something important here, I don't want you on my ship!"`
			`	"No worries, I know it like the back of my hand anyway. Considering, of course, I pilot it."`
			`	"You pilot it..." she replies, looking back and forth between you and it. It's not long before the group understands the situation wholly and drop their ruse to make you leave them alone. Awkwardly she says, "I guess we'll just record... somewhere else, then." They begin collecting their things to go.`
				goto giveup
			label security
			`	"Does this ship belong to one of you?" you ask, sternly.`
			`	One of them, a young woman, says "Uhh, yeah. It's my ship. We're, uh, in the middle of something right now though."`
			`	"Is that so? Then you should have no problem showing me your Pilot's License, and maybe something that proves you own this."`
			`	The group stands around, flashing quick looks at each other, before the same woman replies "Yeah I could if I had it on me. But right now it's somewhere else, so is there something we're doing wrong here?"`
			choice
				`	"The Spaceport has been alerted that this particular ship has been reported stolen."`
					goto stolen
				`	"I'm sure the actual owner of this ship would think you're doing something wrong."`
			`	They give you a blank look as the gears start turning in their heads. The one woman who has been answering you so far says "Well, I am the actual owner of the uhh, <ship>! I don't know who you are to say that I'm not! Come on guys, let's just shoot this somewhere else." The others in the group, still looking dumbfounded, murmur a collective 'okay' before collecting their things to go.`
				goto giveup
			label stolen
			`	"Wuh, stolen?! You don't know who you're talking to, you don't know whose ship this is! Anyway, we should uhh, get going guys." The rest of them, looking a bit more weary about choosing this ship in particular to film in front of, quickly begin collecting their things.`
				goto getout
			label giveup
			`	With enough time, the small body of people leave, muttering frustrated and almost certainly confused words to each other, allowing you to enter your ship in peace.`
				decline
			label getout
			`	In a surprisingly short amount of time, the group rushes away from your ship. You can faintly hear them exchange disgruntled words about either you or each other. Satisfied, you enter your ship.`
				decline



mission "Spaceport Cyclists"
	minor
	source
		government "Republic" "Free Worlds"
		attributes "dirt belt" "factory"
		not attributes "station"
	to offer
		random < 1
	on offer
		conversation
			`While your ship is in the process of refueling, you take a gentle wander around the spaceport. While there isn't anything fundamentally surprising as far as spaceports go, some of its denizens briefly grab your attention. A few people wearing uniforms indicating they work for security here ride by on bicycles, a practically ancient transportation technology that you've never had the thought to try to ride. Their entry is swift and graceful, and despite having seen marvels of modern human engineering across space, the movement of these is so unintuitive you question how they're ever able to stay balanced.`
			choice
				`(Investigate a bit closer.)`
					goto investigate
				`(Ignore these strange 'cyclists.')
			`	Not wanting to focus your mind on such an archaic mode of getting around, you instead set your course back towards your ship which is likely done refueling by now.`
				decline
			label investigate
			`	Looking at the bicycles, you can see the brand name printed on the side of them is almost certainly a local brand on <origin>. Once they've fully rode into the spaceport, their riders bring them up to a rack where they leave them parked before walking away. The entrance they rode in from seems to be a dedicated entrance for bicycles and, looking outside, you can see a few more cyclists both making their way to and away from the building. You figure that having this level of infrastructure to support cycling of all things probably means its a pretty common way of getting around this area.`
			`	What an interesting clash of times.`
				decline



mission "Station Workers Rhythm"
	minor
	source
		government "Republic" "Syndicate" "Free Worlds"
		attributes "station"
	to offer
		random < 1
	on offer
		conversation
			`As far as spaceports go, the ones found on space stations always seem to lean on the side of utility first. While not surprising, it's easy to find the experience of landing on a station to feel overly technical and rather boring. Regardless, you spend the time outside your ship while it refuels, enjoying yourself as well as you can. Among the various mechanical sounds emanating from every direction, you hear a faint rhythmic clanging sound that almost sounds almost melodic. A quick look in the direction of the sounds reveals a few station workers hitting a pipe of some kind with wrenches of various sizes. The makeshift percussion section manages to play a fairly decent tune with the tools they have, something vaguely familiar but which you can't pin down in your mind.`
			`	After about a minute, the workers finish their song and chuckle to each other before leaving to return to work.`
				decline